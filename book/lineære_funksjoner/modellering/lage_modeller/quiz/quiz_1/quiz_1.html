<!-- Container for the quiz -->
<div id="quiz-container-modellering-lage-modeller-underveisoppgave-1" class="quiz-main-container">
    <!-- Placeholder content -->
    <div id="quiz-placeholder-modellering-lage-modeller-underveisoppgave-1" style="height: 300px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center;">
        <p>Laster inn quiz...⏳</p>
    </div>
</div>

<!-- Include KaTeX for LaTeX rendering -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js"></script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", () => {
        const img_style = 'display: block; width: 80%; margin-left: auto; margin-right: auto;';
        // Define your questions and answers
        const questionsData = [
            {
                content: `Hvilke(n) av definisjonsmengdene kan stemme for $f$? <img src="../../../../_static/figurer/lineære_funksjoner/modellering/lage_modeller/quiz/quiz_1/spm_1.svg" style="${img_style}">`,
                answers: [
                    { content: '$D_f = [-1, 3]$', isCorrect: true },
                    { content: '$D_f = [-2, 4]$', isCorrect: false },
                    { content: '$D_f = \\langle 1, 3]$', isCorrect: false },
                    { content: '$D_f = [-5, 1\\rangle $', isCorrect: false },
                ]
            },
            {
                content: `Hvilke(n) av verdimengdene kan stemme for $f$? <img src="../../../../_static/figurer/lineære_funksjoner/modellering/lage_modeller/quiz/quiz_1/spm_2.svg" style="${img_style}">`,
                answers: [
                    { content: '$V_f = \\langle -5, -1]$', isCorrect: true },
                    { content: '$V_f = [-1, 3]$', isCorrect: false },
                    { content: '$V_f = \\langle -3, 1]$', isCorrect: false },
                    { content: '$V_f = [-5, 1\\rangle $', isCorrect: false },
                ]
            },
            {
                content: `Hvilke(n) av definisjonsmengdene kan stemme for $f$? <img src="../../../../_static/figurer/lineære_funksjoner/modellering/lage_modeller/quiz/quiz_1/spm_3.svg" style="${img_style}">`,
                answers: [
                    { content: '$D_f = [-2, 2\\rangle$', isCorrect: true },
                    { content: '$D_g = [-2, 2]$', isCorrect: false },
                    { content: '$D_f = \\langle -3, 5]$', isCorrect: false },
                    { content: '$D_f = [-3, 2\\rangle $', isCorrect: false },
                ]
            },
            {
                content: `Hvilke(n) av verdimengdene kan stemme for $f$? <img src="../../../../_static/figurer/lineære_funksjoner/modellering/lage_modeller/quiz/quiz_1/spm_4.svg" style="${img_style}">`,
                answers: [
                    { content: '$V_f = \\langle -3, 5]$', isCorrect: true },
                    { content: '$V_h = [-3, 5]$', isCorrect: false },
                    { content: '$V_f = \\langle -2, 2]$', isCorrect: false },
                    { content: '$V_f = [-3, 2\\rangle $', isCorrect: false },
                ]
            },
            {
                content: `Hvilke(t) av alternativene kan stemme for $g$? <img src="../../../../_static/figurer/lineære_funksjoner/modellering/lage_modeller/quiz/quiz_1/spm_5.svg" style="${img_style}">`,
                answers: [
                    { content: '$D_g = [-4, 2\\rangle$', isCorrect: true },
                    { content: '$V_g = [-4, -1\\rangle$', isCorrect: true },
                    { content: '$D_g = \\langle -4, 1]$', isCorrect: false },
                    { content: '$V_g = \\langle -4, 2\\rangle $', isCorrect: false },
                ]
            },
        ];

        // Function to initialize the quiz
        function initializeQuiz() {
            const quizContainerId = 'quiz-container-modellering-lage-modeller-underveisoppgave-1';
            const quiz = new SequentialMultipleChoiceQuiz(quizContainerId, questionsData);

            // Remove the placeholder after initializing the quiz
            const placeholder = document.getElementById('quiz-placeholder-modellering-lage-modeller-underveisoppgave-1');
            if (placeholder) {
                placeholder.remove();
            }

            // Disconnect the observer since we don't need it anymore
            observer.disconnect();
        }

        // Set up the IntersectionObserver
        const observerOptions = {
            root: null, // Use the viewport as the root
            rootMargin: '100px', // Start loading before the user reaches the quiz
            threshold: 0.1 // Adjust as needed
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // The placeholder is in view, initialize the quiz
                    initializeQuiz();
                }
            });
        }, observerOptions);

        // Start observing the placeholder
        const placeholder = document.getElementById('quiz-placeholder-modellering-lage-modeller-underveisoppgave-1');
        if (placeholder) {
            observer.observe(placeholder);
        }
    });
</script>
