/* Escape Room directive styles with light/dark mode (aligned with Jeopardy) */
:root {
  color-scheme: light dark;
  /* Light mode tokens */
  --er-bg: #FAFAFA;        /* page background */
  --er-surface: #FFFFFF;    /* card surface */
  --er-text: #1F1F1F;       /* primary text */
  --er-outline: #E0E3EB;    /* borders */
  --er-primary: #1A73E8;    /* accent */
  --er-danger: #D93025;     /* errors */
}
@media (prefers-color-scheme: dark) {
  :root {
    /* Dark mode tokens */
    --er-bg: #121212;
    --er-surface: #1E1E1E;
    --er-text: #E8EAED;
    --er-outline: #2A2E34;
    --er-primary: #1B66C9;
    --er-danger: #EA4335;
  }
}

.escape-room-container {
  box-sizing: border-box;
  width: 100%;
  margin: 1rem auto;
  color: var(--er-text);
  /* In light mode, let the page background show through */
  background: transparent !important;
}
/* In dark mode, keep container on the dark surface token */
@media (prefers-color-scheme: dark) {
  .escape-room-container { background: var(--er-bg); }
}

.er-root { background: transparent; }
.er-header { margin-bottom: 0.5rem; font-weight: 600; }
.er-progress { opacity: 0.8; }
.er-title { margin: 0.25rem 0 0.5rem 0; }
.er-body { background: var(--er-surface); border: 1px solid var(--er-outline); border-radius: 8px; padding: 1rem; color: var(--er-text); }
.er-q { font-size: 1.05rem; background: inherit; }

.escape-room-image-container { text-align: center; margin: 0.5rem 0; }
.escape-room-image-container img { max-width: 100%; height: auto; border-radius: 6px; }

.er-controls { display: flex; gap: 0.5rem; align-items: center; margin-top: 0.75rem; }
.er-controls input[type="text"] { flex: 1; padding: 0.5rem 0.6rem; border: 1px solid var(--er-outline); border-radius: 6px; background: transparent; color: var(--er-text); }
.er-btn { padding: 0.5rem 0.75rem; border: none; border-radius: 6px; cursor: pointer; }
.er-btn.primary { background: var(--er-primary); color: #fff; }

.er-feedback { min-height: 1.25rem; margin-top: 0.25rem; color: var(--er-danger); }
.er-complete { background: var(--er-surface); border: 1px solid var(--er-outline); border-radius: 8px; padding: 1rem; text-align: center; font-weight: 700; }

/* Auto theme (OS/browser preference) */
@media (prefers-color-scheme: light) {
  .er-body { background: #FFFFFF; color: #000000; }
  .er-progress { color: #000000; opacity: 1; }
}
@media (prefers-color-scheme: dark) {
  .er-body { background: var(--er-surface); color: var(--er-text); }
}

/* Explicit theme overrides if site provides toggles (align with Jeopardy approach) */
html.light-mode .er-body,
body.light-mode .er-body,
html[data-theme='light'] .er-body,
body[data-theme='light'] .er-body,
[data-mode='light'] .er-body { background: #FFFFFF !important; color: #000000 !important; }

html.dark-mode .er-body,
body.dark-mode .er-body,
html[data-theme='dark'] .er-body,
body[data-theme='dark'] .er-body,
[data-mode='dark'] .er-body { background: var(--er-surface) !important; color: var(--er-text) !important; }

/* Explicit light-mode overrides for progress text */
html.light-mode .er-progress,
body.light-mode .er-progress,
html[data-theme='light'] .er-progress,
body[data-theme='light'] .er-progress,
[data-mode='light'] .er-progress { color: #000000 !important; opacity: 1 !important; }

/* When embedded inside admonitions, add extra right padding to avoid clipping */
.admonition .escape-room-container { padding-right: 3rem; }
